### 尾调用优化
***
当一个函数的最后一步是调用另外一个函数的时候，就是尾调用
```js
function a(){
    return b();
}
```
以下都不是尾调用，因为有其他操作
```js
function a(){
    var a = b();
    return a;
}
function a(){
    return b() + 1;
}
funtion a(){
    b();
}
```
第1个最后一步是返回值
第2个最后一步是和运算
第3个最后一步实际是return undefined

### 为什么要尾调用优化
当执行a()函数的时候，内存里会保存a函数的调用记录（保存调用位置和变量），在a()里调用b()的时候，会在a()记录的上方形成一个b()的调用记录
等b()返回后再回到a()的调用位置
调用顺序
```js
a(){
    b(){
        c();
    }
}
```
则调用栈为

![](https://raw.githubusercontent.com/heyach/blog/main/images/weidiaoyong.png)

但是当一个函数是最后一步调用的时候（比如c()）,调用完后c的位置和内部变量也不需要保存，因为不会再用到了，所以直接用内层函数的调用帧，节省内存。
递归函数因为可能存在无数个调用，所以很可能会保存无数个栈导致爆栈，将调用优化成尾调用形式可以大大节省内存，提高效率。